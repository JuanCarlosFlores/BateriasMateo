-- MySQL Script generated by MySQL Workbench
-- Sun 16 Jul 2017 06:18:14 PM ART
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';


-- -----------------------------------------------------
-- Schema BATERIAS_MATEO
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `BATERIAS_MATEO` DEFAULT CHARACTER SET utf8 ;
USE `BATERIAS_MATEO` ;

-- -----------------------------------------------------
-- Table `BATERIAS_MATEO`.`BATERIA_TIPO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BATERIAS_MATEO`.`BATERIA_TIPO` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(45) NOT NULL,
  `DESCRIPCION` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BATERIAS_MATEO`.`ALMACEN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BATERIAS_MATEO`.`ALMACEN` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` VARCHAR(45) NULL,
  `CAPACIDAD` INT NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BATERIAS_MATEO`.`ESTACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BATERIAS_MATEO`.`ESTACION` (
  `ID` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BATERIAS_MATEO`.`BATERIA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BATERIAS_MATEO`.`BATERIA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NRO_LOTE` INT NOT NULL,
  `RESERVADA` TINYINT(1) NULL,
  `BATERIA_TIPO_ID` INT NOT NULL,
  `ALMACEN_ID` INT NOT NULL,
  `ESTACION_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC),
  INDEX `FK_BATERIA_TIPO_INDX` (`BATERIA_TIPO_ID` ASC),
  INDEX `FK_BATERIA_ALMACEN_INDX` (`ALMACEN_ID` ASC),
  INDEX `FK_BATERIA_ESTACION_INDX` (`ESTACION_ID` ASC),
  UNIQUE INDEX `NRO_LOTE_UNIQUE` (`NRO_LOTE` ASC),
  CONSTRAINT `FK_BATERIA_TIPO_ID`
    FOREIGN KEY (`BATERIA_TIPO_ID`)
    REFERENCES `BATERIAS_MATEO`.`BATERIA_TIPO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_BATERIA_ALMACEN_ID`
    FOREIGN KEY (`ALMACEN_ID`)
    REFERENCES `BATERIAS_MATEO`.`ALMACEN` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_BATERIA_ESTACION_ID`
    FOREIGN KEY (`ESTACION_ID`)
    REFERENCES `BATERIAS_MATEO`.`ESTACION` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BATERIAS_MATEO`.`LOCALIDAD`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BATERIAS_MATEO`.`LOCALIDAD` (
  `ID` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BATERIAS_MATEO`.`PROVEEDOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BATERIAS_MATEO`.`PROVEEDOR` (
  `ID` INT NOT NULL,
  `DOCUMENTO` INT NOT NULL,
  `RAZON SOCIAL` VARCHAR(45) NULL,
  `LOCALIDAD_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `FK_PROVEEDOR_LOCALIDAD_INDX` (`LOCALIDAD_ID` ASC),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC),
  CONSTRAINT `FK_PROVEEDOR_LOCALIDAD_ID`
    FOREIGN KEY (`LOCALIDAD_ID`)
    REFERENCES `BATERIAS_MATEO`.`LOCALIDAD` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BATERIAS_MATEO`.`INSUMO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BATERIAS_MATEO`.`INSUMO` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(45) NOT NULL,
  `DETALLE` VARCHAR(45) NULL,
  `VALOR_MINIMO` INT NOT NULL,
  `CANTIDAD` INT NOT NULL,
  `PROVEEDOR_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `FK_INSUMO_PROVEEDOR_INDX` (`PROVEEDOR_ID` ASC),
  CONSTRAINT `FK_INSUMO_PROVEEDOR`
    FOREIGN KEY (`PROVEEDOR_ID`)
    REFERENCES `BATERIAS_MATEO`.`PROVEEDOR` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BATERIAS_MATEO`.`MATERIA_PRIMA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BATERIAS_MATEO`.`MATERIA_PRIMA` (
  `ID` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NOT NULL,
  `DETALLE` VARCHAR(45) NULL,
  `CANTIDAD` INT NOT NULL DEFAULT 0,
  `VALOR_MINIMO` VARCHAR(45) NOT NULL,
  `PROVEEDOR_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `FK_MATERIA_PRIMA_PROVEEDOR_INDX` (`PROVEEDOR_ID` ASC),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC),
  CONSTRAINT `FK_MATERIA_PRIMA_PROVEEDOR`
    FOREIGN KEY (`PROVEEDOR_ID`)
    REFERENCES `BATERIAS_MATEO`.`PROVEEDOR` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BATERIAS_MATEO`.`PRODUCTO_INTERMEDIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BATERIAS_MATEO`.`PRODUCTO_INTERMEDIO` (
  `ID` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NULL,
  `DESCRIPCION` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BATERIAS_MATEO`.`ESTACION_PRODUCTOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BATERIAS_MATEO`.`ESTACION_PRODUCTOS` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ESTACION_ID` INT NOT NULL,
  `MATERIA_PRIMA_ID` INT NULL,
  `INSUMO_ID` INT NULL,
  `PRODUCTO_INTERMEDIO_ID` INT NULL,
  `TIPO_RELACION` ENUM ('CONSUMIBLE','PRODUCIBLE') NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `FK_ESTACION_ID_PRODUCTOS_INDX` (`ESTACION_ID` ASC),
  INDEX `FK_ESTACION_MATERIA_PRIMA_ID_INDX` (`MATERIA_PRIMA_ID` ASC),
  INDEX `FK_ESTACION_INSUMO_ID_idx` (`INSUMO_ID` ASC),
  INDEX `FK_ESTACION_PRODUCTO_INT_ID_INDX` (`PRODUCTO_INTERMEDIO_ID` ASC),
  CONSTRAINT `FK_ESTACION_ID_PRODUCTOS`
    FOREIGN KEY (`ESTACION_ID`)
    REFERENCES `BATERIAS_MATEO`.`ESTACION` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_ESTACION_MATERIA_PRIMA_ID`
    FOREIGN KEY (`MATERIA_PRIMA_ID`)
    REFERENCES `BATERIAS_MATEO`.`MATERIA_PRIMA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_ESTACION_INSUMO_ID`
    FOREIGN KEY (`INSUMO_ID`)
    REFERENCES `BATERIAS_MATEO`.`INSUMO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_ESTACION_PRODUCTO_INT_ID`
    FOREIGN KEY (`PRODUCTO_INTERMEDIO_ID`)
    REFERENCES `BATERIAS_MATEO`.`PRODUCTO_INTERMEDIO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = 'Tabla intermedia entre los distintos productos (INSUMOS - MATERIA_PRIMA - PRODUCTO_INTERMEDIO) y la ESTACION que puede utilizarlo.';


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
